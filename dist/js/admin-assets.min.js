function statSaveSlider(e){stat.sliders[stat.workingSlider]=[e||stat.selectedIds,stat.sliderInterval,stat.sliderNumber]}function unique(e){var t=[];return e.filter(function(e){return-1==t.indexOf(e)?(t.push(e),e):void 0})}function checkIrregularFilename(e){var t={};t.error=!1,t.expression=[];for(var n=options.sizes.length,o=0;n>o;o++)-1!==e.indexOf("_"+options.sizes[o])&&(t.error=!0,t.expression.push("_"+options.sizes[o]));return t}function pickFromObject(e,t){for(var n={},o=(Object.keys(e),t.length),i=0;o>i;i++)e[t[i]]&&(n[t[i]]=e[t[i]]);return console.log(n),n}function arrayIntersection(e,t){var n=e.filter(function(e){return t.indexOf(e)>-1?e:void 0}),o=t.filter(function(e){return n.indexOf(e)>-1?e:void 0});return n.concat(o).unique()}function arrayWithout(e,t){return e.filter(function(e){return-1===t.indexOf(e)?e:void 0})}function arrayDiff(e,t,n){var n=n||!1,o={};return o.arr1=e.filter(function(e){return-1===t.indexOf(e)?e:void 0}),n?(o.arr2=t.filter(function(t){return-1===e.indexOf(t)?t:void 0}),o.concat=o.arr1.concat(o.arr2),o):o.arr1}function withoutGalleryBase(e){if("string"==typeof e){if(-1!==e.indexOf("/")){value=e.split("/");var t=value.length;return value[t-1]}return!1}return e.map(function(e){if(-1!==e.indexOf("/")){e=e.split("/");var t=e.length;return e[t-1]}})}function ignoreFolder(e){var t=$("#foldersTable tr[data='"+e+"']");-1==stat.ignoreFolders.indexOf(e)?(stat.ignoreFolders.push(e),t.removeClass().addClass("warning")):(stat.ignoreFolders.splice(stat.ignoreFolders.indexOf(e),1),t.removeClass().addClass("default"))}function addNewImages(){}function getNewImages(e){if(!e)var e=stat.allImages;var t=[];stat.newImages=[];for(var n in e)gJ.images[n]||t.push(n);return t.length>0,stat.newImages=t,t}function gjFilteredByFolder(e){for(var t=e||stat.workingFolder,n={},o=Object.keys(gJ.images),i=o.length,r=0;i>r;r++){var a=gJ.images[o[r]];a.folder===t&&(n[o[r]]=a)}return n}function deleteFolderRelations(e,t){function n(){r<o.length?removeFolder(o[r]).done(function(e){}).always(function(e){r++,n()}):t&&t()}var o=[e],i=options.sizes.length,r=0,a=gJ.ignore.indexOf(e);if(a>-1)gJ.ignore.splice(a,1);else for(var s=Object.keys(gJ.images),l=s.length,c=0;l>c;c++)gJ.images[s[c]].folder==e&&delete gJ.images[s[c]];for(var d=0;i>d;d++)o.push(e+"_"+options.sizes[d]);n()}function getRemovedImages(e){var t=gjFilteredByFolder(e);for(var n in t)stat.imagesFromFolder[n]||stat.imagesRemoved.push(kk)}function saveJSON(){saving=!0,$("#saveButton").prop("disabled",!0).text("saving"),backup().done(function(){var e=JSON.stringify(gJ),t="gallery.json";saveFileAs(e,t).done(function(){$("#saveButton").prop("disabled",!1).text("Save"),saving=!1})})}function saveStatus(e){var t=!e;saving&&(t=!0),$("#saveButton").prop("disabled",t)}function setOptions(){$("#gallery-row").find(".gallery-item").removeClass("selected-image").off("click"),stat.options=options,$("#thumb-size-select").val(stat.options.thumbSize).on("change",function(){removeClasses("div#gallery-row div.gallery-item",stat.options.thumbSizeSizes[stat.options.thumbSize]),stat.options={thumbSize:$(this).val()};var e=stat.options.thumbSizeSizes[stat.options.thumbSize].toString().replace(/,/g," ");$("div#gallery-row").find("div.gallery-item").addClass(e),proportion({selector:"section#gallery-section div.gallery-item",proportion:stat.options.proportion,className:"pgi",styleId:"prop-gallery-item"}),saveStatus(!0)}),$("#thumb-proportion-select").val(stat.options.proportion.toString()).on("change",function(){stat.options={proportion:$(this).val().split(",").map(function(e){return parseInt(e)})},proportion({selector:"section#gallery-section div.gallery-item",proportion:stat.options.proportion,className:"pgi",styleId:"prop-gallery-item"}),saveStatus(!0)}),$("#thumb-fit-select").val(stat.options.thumbFit.toString()).on("change",function(){stat.options={thumbFit:$(this).val()},$("div#gallery-row").find("div.gallery-item div.thumb-div").removeClass("cover-image contain-image").addClass(stat.options.thumbFit+"-image"),saveStatus(!0)}),$("#thumb-padding-input").val(stat.options.thumbPadding).on("keydown",function(e){return-1!==[46,8,9,27,13].indexOf(e.keyCode)||65==e.keyCode&&e.ctrlKey===!0||67==e.keyCode&&e.ctrlKey===!0||88==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39?void 0:(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)?(e.preventDefault(),!1):void 0}).on("change input",function(){var e=$(this).val()||0;stat.options={thumbPadding:!e||1>e?0:e},createStyle({id:"item-padding",style:"div#gallery-row div.gallery-item {padding: "+stat.options.thumbPadding+"px}"}),saveStatus(!0)}),$("#input-sizes").val(stat.options.sizes.toString()).attr("placeholder",stat.options.sizes.toString()).on("keydown",function(e){var t=$(this).val();return 188==e.keyCode&&""==t?!1:188==e.keyCode&&","==t.charAt(t.length-1)&&","==t.charAt(t.length-1)?!1:void(-1!==[46,8,9,27,13,188].indexOf(e.keyCode)||65==e.keyCode&&e.ctrlKey===!0||67==e.keyCode&&e.ctrlKey===!0||88==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault())}).on("change input",function(){var e=$(this).val().split(",").unique().filter(function(e){return parseInt(e)?e:void 0}).map(function(e,t){return parseInt(e)}).sort(function(e,t){return e-t});stat.options={sizes:e},saveStatus(!0)})}function fullScreen(e){var t=document.getElementById("effect-fullscreen");document.getElementById("effect-preview-image").addEventListener("click",function(){t.style.display="block",t.style.backgroundImage="url("+e+")"}),t.addEventListener("click",function(){t.style.display="none"})}function loadBlur(e){if(!e){var t=document.querySelector("#slider-sortable .selected-image");t||(document.getElementById("slider-sortable").querySelector(".gallery-item").className+=" selected-image",t=document.querySelector("#slider-sortable .selected-image"));var e=t.getAttribute("data-id")}$("#blurPath").val(e);var n="gallery/"+gJ.images[e].folder+"_720/"+gJ.images[e].file;$("#blur-image-frame").find("img").attr("src",n).imagesLoaded().always(function(){}).done(function(){blur("#effect-preview-image",stat.effect[1]),fullScreen(n),blur("#effect-fullscreen",stat.effect[1])})}function reset(){document.getElementById("slider-sortable").innerHTML="",removeClasses("div.gallery-item.selected-image",["selected-image"]),prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),proportion({selector:"div#slider-sortable div.placeholder-item",proportion:[1,1],className:"ssp",styleId:"slider-sortable-prop"}),buttonDisable(!0)}function selectedIds(){for(var e=[],t=document.getElementById("slider-sortable").querySelectorAll("div.gallery-item"),n=t.length,o=0;n>o;o++)e.push(t[o].getAttribute("data-id"));return stat.selectedIds=e,e}function buttonDisable(e){document.getElementById("slider-save-btn").disabled=e,document.getElementById("slider-clear-btn").disabled=e,document.getElementById("slider-preview-btn").disabled=e}function autoIds(e){if(!$("#slider-sortable").is(":empty"))return $("#slider-sortable").find("div.gallery-item").each(function(){$("div#gallery-row").find('div[data-id="'+$(this).attr("data-id")+'"]').addClass("selected-image")}),!1;if(gJ.sliders[0]){var t=gJ.sliders[0],n=t.length;if(n>1||"auto"!=t)for(var o=0;n>o;o++)$('*[data-id="'+t[o]+'"]').addClass("selected-image"),document.getElementById("gallery-row").querySelector('div[data-id="'+gJ.sliders[0][o]+'"]').click()}}function selectTags(){var e=stat.tagsSelectedIds,t=e.length,n=[];if(selectizeTags.clear(),0===t)return!1;var o=stat.imageTags[stat.tagsSelectedIds[0]]||gJ.images[stat.tagsSelectedIds[0]].tags,i=$("#input-tags").attr("value").split(",");if(1===t)n=i=o;else if(t>1){i=i[0]?i:o;for(var r=0;t>r;r++){var a=stat.tagsSelectedIds[r];attrTags=stat.imageTags[a]||gJ.images[a].tags,n=n.concat(attrTags).unique(),i=arrayIntersection(i,attrTags)}}$("#input-tags").attr("value",i),$.each(i,function(e,t){selectizeTags.createItem(t)}),selectizeTags.refreshItems()}function deleteSelectedImages(){function e(e){o.length>0&&$.ajax({type:"GET",url:"gallery/removeImage.php",data:"path="+e}).done(function(){i++,t()}).fail(function(){i++,t()})}function t(){r>=i?e(o[i]):$("#deleteImagesButton").off("click").text("save").on("click",function(){saveJSON()})}var n=0,o=[];if(selectedImages.length>0){selectedImages.each(function(){n++;var e=$(this).attr("data-id");for(var t in gJ.sizes){var i=gJ.sizes[t];o.push(gJ.images[e].folder+"_"+i+"/"+gJ.images[e].file)}delete gJ.images[e]});var i=0,r=o.length;t()}}function processResponse(e){console.log(e);var e=JSON.parse(e),t=e.name,n=e.data.path,o=n.split("/");o=o[o.length-1];var i=[];e.data.tags&&(i=e.data.tags.split(",")),i.push(o);for(var r=0;r<t.length;r++){var a=Date.now(),s=e.name[r],l=encodeURI(t[r]),c=n+l,d={file:s,folder:n,time:a,tags:i};gJ.images[c]=d}}function setFolderSelect(e){$("#upload-folder-select").html("");for(var t=e?e:gJ.folders,n=t.length,o=0;n>o;o++)prototype({template:"#folder-select-prototype",selectors:["folder"],values:[t[o]],targets:"#upload-folder-select"})}function checkImageSizes(e,t,n){function o(){if(i>s){var c=e[r[s]],d=c.folder;if(a>l){var u=d+"_"+gJ.sizes[l]+c.file,p=options.galleryPath+d+"_"+gJ.sizes[l]+"/"+c.file;if(t)return fileExists(p).done(function(){}).fail(function(){-1===stat.imagesNotProcessed.indexOf(r[s])&&stat.imagesNotProcessed.push(r[s])}).always(function(){l++,o()}),!1;stat.allImages[u]||(stat.imagesNotProcessed.push(s),stat.imagesNotProcessed=stat.imagesNotProcessed.unique()),l++,o()}else l=0,s++,o()}else n&&n()}var e=e||gJ.images,i=e.length;if(!i){var r=Object.keys(e);i=r.length}var a=gJ.sizes.length,t=!!t,s=0,l=0;o()}function getAllImages(e){function t(){var s=stat.allFolders[n];stat.workingFolder=s,imagesFromFolder(a).done(function(e){var t=0;if(e){t=Object.keys(e).length;for(var n in e)stat.existingImages[n]=e[n]}r[s]=[t,0,0]}).fail(function(){}).always(function(){i&&o<options.sizes.length?(a=s+"_"+options.sizes[o],o++,t()):(n++,n<stat.allFolders.length?(o=0,a=stat.allFolders[n],t()):(stat.folderImages=r,e&&e.cb&&e.cb()))})}var n=0,o=0,i=e&&e.deep?e.deep:!1,r=[],a=stat.allFolders[0];t()}function checkLoggedin(){}function requestLogin(e){var t=new XMLHttpRequest;t.open("POST","login.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(e){t.status>=200&&t.status<400&&(loggedin=e)},t.onerror=function(){},t.send(e)}function initLogin(){document.getElementById("loginSubmit").onclick=function(e){e.preventDefault();var t=document.getElementById("inputUsername").value,n=document.getElementById("inputPassword").value,o="off";document.getElementById("inputRememberme").checked&&(o="on");var i="username="+t+"&password="+n+"&rememberme="+o;requestLogin(i)}}function processImages(){loader(),$("#allImagesButton").off("click").text("resize "+imagesAdded.length+" image/s").on("click",function(){window.ri=0;var e=imagesFromFolderData,t=imagesAdded,n=0;if(t)var n=t.length;resizeStoreSync(e,t,n,folder)}),processImages()}function resizeStoreSync(e,t,n,o){if(window.ri<n){var i=t[window.ri],r=e[i],o=r.folder,a=r.file;resizeStore(o,a).done(function(t){window.ri++,gJ.images[i]=e[i],resizeStoreSync()})}}function processNewFolders(e){return loader(),0===stat.newFolders.length?!1:void processNewFolder({folder:stat.newFolders[0],cb:function(){stat.newFolders.length>0?processNewFolders():e&&e()}})}function processNewFolder(e){var t=e?e.folder:stat.workingFolder;imagesFromFolder(t).done(function(n){function o(){if(a>s){var t=stat.newImages[0],i=n[t],r=i.folder,l=i.file;stat.workingImage=l;var c=new _resizeStoreSizes(r,l);c.done(function(){stat.newImages=arrayWithout(stat.newImages,[t]),gJ.images[t]=n[t],s++,o()}),-1===gJ.folders.indexOf(r)&&gJ.folders.push(r)}else e.cb&&e.cb()}var i=!1;if(n)var r=Object.keys(n),a=r.length;else i=!0;if(i||1>a)return stat.newImages=[],e.cb&&e.cb(),!1;stat.newImages=r;var s=0;o(),stat.newFolders=arrayWithout(stat.newFolders,[t])}).fail(function(){stat.newFolders=arrayWithout(stat.newFolders,[t])}),fnf++}function removeImages(){function e(){o<n.length?removeImage(n[o]).done(function(){o++,delete gJ.images[key],delete imagesRemoved[key],e()}).fail(function(){o++,e()}):$("#deleteImagesButton").off("click").text("save").on("click",function(){saveJSON()})}var t=imagesRemoved.length,n=[],o=0;if(t>0){var i=imagesRemoved[o];for(var r in gJ.sizes){var a=gJ.sizes[r],s=gJ.images[r].file,l=gJ.images[r].folder,c=l+"_"+a+s;allImagesFromServer[c]&&n.push(gJ.images[i].folder+"_"+a+"/"+gJ.images[i].file)}}n.length;e()}var adminAssets=!0;!function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=o(String(e||"").toLowerCase()),!e||!e.length)return[];var t,n,r,s,l=[],c=e.split(/ +/);for(t=0,n=c.length;n>t;t++){if(r=i(c[t]),this.settings.diacritics)for(s in a)a.hasOwnProperty(s)&&(r=r.replace(new RegExp(s,"g"),a[s]));l.push({string:c[t],regex:new RegExp(r,"i")})}return l},e.prototype.iterator=function(e,t){var n;n=r(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,o,i,r;n=this,e=n.prepareSearch(e,t),i=e.tokens,o=e.options.fields,r=i.length;var a=function(e,t){var n,o;return e?(e=String(e||""),o=e.search(t.regex),-1===o?0:(n=t.string.length/e.length,0===o&&(n+=.5),n)):0},s=function(){var e=o.length;return e?1===e?function(e,t){return a(t[o[0]],e)}:function(t,n){for(var i=0,r=0;e>i;i++)r+=a(n[o[i]],t);return r/e}:function(){return 0}}();return r?1===r?function(e){return s(i[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,o=0;r>n;n++){if(t=s(i[n],e),0>=t)return 0;o+=t}return o/r}:function(e){for(var t=0,n=0;r>t;t++)n+=s(i[t],e);return n/r}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var o,i,r,a,s,l,c,d,u,p,f;if(r=this,e=r.prepareSearch(e,n),f=!e.query&&n.sort_empty||n.sort,u=function(e,t){return"$score"===e?t.score:r.items[t.id][e]},s=[],f)for(o=0,i=f.length;i>o;o++)(e.query||"$score"!==f[o].field)&&s.push(f[o]);if(e.query){for(p=!0,o=0,i=s.length;i>o;o++)if("$score"===s[o].field){p=!1;break}p&&s.unshift({field:"$score",direction:"desc"})}else for(o=0,i=s.length;i>o;o++)if("$score"===s[o].field){s.splice(o,1);break}for(d=[],o=0,i=s.length;i>o;o++)d.push("desc"===s[o].direction?-1:1);return l=s.length,l?1===l?(a=s[0].field,c=d[0],function(e,n){return c*t(u(a,e),u(a,n))}):function(e,n){var o,i,r;for(o=0;l>o;o++)if(r=s[o].field,i=d[o]*t(u(r,e),u(r,n)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=n({},t);var o=t.fields,i=t.sort,a=t.sort_empty;return o&&!r(o)&&(t.fields=[o]),i&&!r(i)&&(t.sort=[i]),a&&!r(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,o,i,r,a=this;return o=this.prepareSearch(e,t),t=o.options,e=o.query,r=t.score||a.getScoreFunction(o),e.length?a.iterator(a.items,function(e,i){n=r(e),(t.filter===!1||n>0)&&o.items.push({score:n,id:i})}):a.iterator(a.items,function(e,t){o.items.push({score:1,id:t})}),i=a.getSortFunction(o,t),i&&o.items.sort(i),o.total=o.items.length,"number"==typeof t.limit&&(o.items=o.items.slice(0,t.limit)),o};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=s(String(e||"")),t=s(String(t||"")),e>t?1:t>e?-1:0)},n=function(e){var t,n,o,i;for(t=1,n=arguments.length;n>t;t++)if(i=arguments[t])for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e},o=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},i=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},s=function(){var e,t,n,o,i="",r={};for(n in a)if(a.hasOwnProperty(n))for(o=a[n].substring(2,a[n].length-1),i+=o,e=0,t=o.length;t>e;e++)r[o.charAt(e)]=n;var s=new RegExp("["+i+"]","g");return function(e){return e.replace(s,function(e){return r[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,o,i,r=this,a=[];if(r.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,o=e.length;o>n;n++)"string"==typeof e[n]?a.push(e[n]):(r.plugins.settings[e[n].name]=e[n].options,a.push(e[n].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(r.plugins.settings[i]=e[i],a.push(i));for(;a.length;)r.require(a.shift())},e.prototype.loadPlugin=function(t){var n=this,o=n.plugins,i=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');o.requested[t]=!0,o.loaded[t]=i.fn.apply(n,[n.plugins.settings[t]||{}]),o.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,n){"use strict";var o=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,o=function(e){var t=0;if(3===e.nodeType){var i=e.data.search(n);if(i>=0&&e.data.length>0){var r=e.data.match(n),a=document.createElement("span");a.className="highlight";var s=e.splitText(i),l=(s.splitText(r[0].length),s.cloneNode(!0));a.appendChild(l),s.parentNode.replaceChild(a,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=o(e.childNodes[c]);return t};return e.each(function(){o(this)})}},i=function(){};i.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=i.prototype[t[n]]};var r=/Mac/.test(navigator.userAgent),a=65,s=13,l=27,c=37,d=38,u=80,p=39,f=40,g=78,h=8,m=46,v=16,b=r?91:17,y=r?18:17,w=9,O=1,C=2,$=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,k=function(e){return"undefined"!=typeof e},I=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},S=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},x=function(e){return(e+"").replace(/\$/g,"$$$$")},A={};A.before=function(e,t,n){var o=e[t];e[t]=function(){return n.apply(e,arguments),o.apply(e,arguments)}},A.after=function(e,t,n){var o=e[t];e[t]=function(){var t=o.apply(e,arguments);return n.apply(e,arguments),t}};var F=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},E=function(e,t){var n;return function(){var o=this,i=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(o,i)},t)}},N=function(e,t,n){var o,i=e.trigger,r={};e.trigger=function(){var n=arguments[0];return-1===t.indexOf(n)?i.apply(e,arguments):void(r[n]=arguments)},n.apply(e,[]),e.trigger=i;for(o in r)r.hasOwnProperty(o)&&i.apply(e,r[o])},j=function(e,t,n,o){e.on(t,n,function(t){for(var n=t.target;n&&n.parentNode!==e[0];)n=n.parentNode;return t.currentTarget=n,o.apply(this,[t])})},_=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),o=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-o,t.length=o}return t},z=function(e,t,n){var o,i,r={};if(n)for(o=0,i=n.length;i>o;o++)r[n[o]]=e.css(n[o]);else r=e.css();t.css(r)},T=function(t,n){if(!t)return 0;var o=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");z(n,o,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var i=o.width();return o.remove(),i},D=function(e){var t=null,n=function(n,o){var i,r,a,s,l,c,d,u;n=n||window.event||{},o=o||{},n.metaKey||n.altKey||(o.force||e.data("grow")!==!1)&&(i=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(r=n.keyCode,a=r>=97&&122>=r||r>=65&&90>=r||r>=48&&57>=r||32===r,r===m||r===h?(u=_(e[0]),u.length?i=i.substring(0,u.start)+i.substring(u.start+u.length):r===h&&u.start?i=i.substring(0,u.start-1)+i.substring(u.start+1):r===m&&"undefined"!=typeof u.start&&(i=i.substring(0,u.start)+i.substring(u.start+1))):a&&(c=n.shiftKey,d=String.fromCharCode(n.keyCode),d=c?d.toUpperCase():d.toLowerCase(),i+=d)),s=e.attr("placeholder"),!i&&s&&(i=s),l=T(i,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},L=function(n,o){var i,r,a,s,l=this;s=n[0],s.selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(s,null);if(a=c?c.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,a=a||n.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:o,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?O:C,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===o.loadThrottle?l.onSearchChange:E(l.onSearchChange,o.loadThrottle)}),l.sifter=new t(this.options,{diacritics:o.diacritics}),l.settings.options){for(i=0,r=l.settings.options.length;r>i;i++)l.registerOption(l.settings.options[i]);delete l.settings.options}if(l.settings.optgroups){for(i=0,r=l.settings.optgroups.length;r>i;i++)l.registerOptionGroup(l.settings.optgroups[i]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return i.mixin(L),n.mixin(L),e.extend(L.prototype,{setup:function(){var t,n,o,i,a,s,l,c,d,u=this,p=u.settings,f=u.eventNS,g=e(window),h=e(document),m=u.$input;if(l=u.settings.mode,c=m.attr("class")||"",t=e("<div>").addClass(p.wrapperClass).addClass(c).addClass(l),n=e("<div>").addClass(p.inputClass).addClass("items").appendTo(t),o=e('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",m.is(":disabled")?"-1":u.tabIndex),s=e(p.dropdownParent||t),i=e("<div>").addClass(p.dropdownClass).addClass(l).hide().appendTo(s),a=e("<div>").addClass(p.dropdownContentClass).appendTo(i),u.settings.copyClassesToDropdown&&i.addClass(c),t.css({width:m[0].style.width}),u.plugins.names.length&&(d="plugin-"+u.plugins.names.join(" plugin-"),t.addClass(d),i.addClass(d)),(null===p.maxItems||p.maxItems>1)&&u.tagType===O&&m.attr("multiple","multiple"),u.settings.placeholder&&o.attr("placeholder",p.placeholder),!u.settings.splitOn&&u.settings.delimiter){var w=u.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");u.settings.splitOn=new RegExp("\\s*"+w+"+\\s*")}m.attr("autocorrect")&&o.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&o.attr("autocapitalize",m.attr("autocapitalize")),u.$wrapper=t,u.$control=n,u.$control_input=o,u.$dropdown=i,u.$dropdown_content=a,i.on("mouseenter","[data-selectable]",function(){return u.onOptionHover.apply(u,arguments)}),i.on("mousedown click","[data-selectable]",function(){return u.onOptionSelect.apply(u,arguments)}),j(n,"mousedown","*:not(input)",function(){return u.onItemSelect.apply(u,arguments)}),D(o),n.on({mousedown:function(){return u.onMouseDown.apply(u,arguments)},click:function(){return u.onClick.apply(u,arguments)}}),o.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return u.onKeyDown.apply(u,arguments)},keyup:function(){return u.onKeyUp.apply(u,arguments)},keypress:function(){return u.onKeyPress.apply(u,arguments)},resize:function(){u.positionDropdown.apply(u,[])},blur:function(){return u.onBlur.apply(u,arguments)},focus:function(){return u.ignoreBlur=!1,u.onFocus.apply(u,arguments)},paste:function(){return u.onPaste.apply(u,arguments)}}),h.on("keydown"+f,function(e){u.isCmdDown=e[r?"metaKey":"ctrlKey"],u.isCtrlDown=e[r?"altKey":"ctrlKey"],u.isShiftDown=e.shiftKey}),h.on("keyup"+f,function(e){e.keyCode===y&&(u.isCtrlDown=!1),e.keyCode===v&&(u.isShiftDown=!1),e.keyCode===b&&(u.isCmdDown=!1)}),h.on("mousedown"+f,function(e){if(u.isFocused){if(e.target===u.$dropdown[0]||e.target.parentNode===u.$dropdown[0])return!1;u.$control.has(e.target).length||e.target===u.$control[0]||u.blur(e.target)}}),g.on(["scroll"+f,"resize"+f].join(" "),function(){u.isOpen&&u.positionDropdown.apply(u,arguments)}),g.on("mousemove"+f,function(){u.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(u.$wrapper),e.isArray(p.items)&&(u.setValue(p.items),delete p.items),$&&m.on("invalid"+f,function(e){e.preventDefault(),u.isInvalid=!0,u.refreshState()}),u.updateOriginalInput(),u.refreshItems(),u.refreshState(),u.updatePlaceholder(),u.isSetup=!0,m.is(":disabled")&&u.disable(),u.on("change",this.onChange),m.data("selectize",u),m.addClass("selectized"),u.trigger("initialize"),p.preload===!0&&u.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,o=t.settings.optgroupLabelField,i={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[o])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},i,t.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var n=this,o=t.isDefaultPrevented();if(e(t.target),n.isFocused){if(t.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():o||n.setActiveItem(null),!1}else o||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var n=this;n.isFull()||n.isInputHidden||n.isLocked?t.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var t=e.trim(n.$control_input.val()||"").split(n.settings.splitOn),o=0,i=t.length;i>o;o++)n.createItem(t[o])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==w&&e.preventDefault());switch(e.keyCode){case a:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case g:if(!e.ctrlKey||e.altKey)break;case f:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case u:if(!e.ctrlKey||e.altKey)break;case d:if(t.$activeOption){t.ignoreHover=!0;var o=t.getAdjacentOption(t.$activeOption,-1);o.length&&t.setActiveOption(o,!0,!0)}return void e.preventDefault();case s:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case c:return void t.advanceSelection(-1,e);case p:return void t.advanceSelection(1,e);case w:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case h:case m:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(r?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(o){n.apply(t,[e,o])})))},onFocus:function(e){var t=this,n=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var o=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(t||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,o):o()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var n,o,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),o=e(t.currentTarget),o.hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):(n=o.attr("data-value"),"undefined"!=typeof n&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(n),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(n))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){
t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,n=t.val()!==e;n&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===O&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var n=t?[]:["change"];N(this,n,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,n){var o,i,r,a,s,l,c,d,u=this;if("single"!==u.settings.mode){if(t=e(t),!t.length)return e(u.$activeItems).removeClass("active"),u.$activeItems=[],void(u.isFocused&&u.showInput());if(o=n&&n.type.toLowerCase(),"mousedown"===o&&u.isShiftDown&&u.$activeItems.length){for(d=u.$control.children(".active:last"),a=Array.prototype.indexOf.apply(u.$control[0].childNodes,[d[0]]),s=Array.prototype.indexOf.apply(u.$control[0].childNodes,[t[0]]),a>s&&(c=a,a=s,s=c),i=a;s>=i;i++)l=u.$control[0].childNodes[i],-1===u.$activeItems.indexOf(l)&&(e(l).addClass("active"),u.$activeItems.push(l));n.preventDefault()}else"mousedown"===o&&u.isCtrlDown||"keydown"===o&&this.isShiftDown?t.hasClass("active")?(r=u.$activeItems.indexOf(t[0]),u.$activeItems.splice(r,1),t.removeClass("active")):u.$activeItems.push(t.addClass("active")[0]):(e(u.$activeItems).removeClass("active"),u.$activeItems=[t.addClass("active")[0]]);u.hideInput(),this.isFocused||u.focus()}},setActiveOption:function(t,n,o){var i,r,a,s,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,t=e(t),t.length&&(c.$activeOption=t.addClass("active"),(n||!k(n))&&(i=c.$dropdown_content.height(),r=c.$activeOption.outerHeight(!0),n=c.$dropdown_content.scrollTop()||0,a=c.$activeOption.offset().top-c.$dropdown_content.offset().top+n,s=a,l=a-i+r,a+r>i+n?c.$dropdown_content.stop().animate({scrollTop:l},o?c.settings.scrollDuration:0):n>a&&c.$dropdown_content.stop().animate({scrollTop:s},o?c.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var n,o,i,r=this,a=r.settings,s=this.getSearchOptions();if(a.score&&(i=r.settings.score.apply(this,[t]),"function"!=typeof i))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==r.lastQuery?(r.lastQuery=t,o=r.sifter.search(t,e.extend(s,{score:i})),r.currentResults=o):o=e.extend(!0,{},r.currentResults),a.hideSelected)for(n=o.items.length-1;n>=0;n--)-1!==r.items.indexOf(I(o.items[n].id))&&o.items.splice(n,1);return o},refreshOptions:function(t){var n,i,r,a,s,l,c,d,u,p,f,g,h,m,v,b;"undefined"==typeof t&&(t=!0);var y=this,w=e.trim(y.$control_input.val()),O=y.search(w),C=y.$dropdown_content,$=y.$activeOption&&I(y.$activeOption.attr("data-value"));for(a=O.items.length,"number"==typeof y.settings.maxOptions&&(a=Math.min(a,y.settings.maxOptions)),s={},l=[],n=0;a>n;n++)for(c=y.options[O.items[n].id],d=y.render("option",c),u=c[y.settings.optgroupField]||"",p=e.isArray(u)?u:[u],i=0,r=p&&p.length;r>i;i++)u=p[i],y.optgroups.hasOwnProperty(u)||(u=""),s.hasOwnProperty(u)||(s[u]=[],l.push(u)),s[u].push(d);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var n=y.optgroups[e].$order||0,o=y.optgroups[t].$order||0;return n-o}),f=[],n=0,a=l.length;a>n;n++)u=l[n],y.optgroups.hasOwnProperty(u)&&s[u].length?(g=y.render("optgroup_header",y.optgroups[u])||"",g+=s[u].join(""),f.push(y.render("optgroup",e.extend({},y.optgroups[u],{html:g})))):f.push(s[u].join(""));if(C.html(f.join("")),y.settings.highlight&&O.query.length&&O.tokens.length)for(n=0,a=O.tokens.length;a>n;n++)o(C,O.tokens[n].regex);if(!y.settings.hideSelected)for(n=0,a=y.items.length;a>n;n++)y.getOption(y.items[n]).addClass("selected");h=y.canCreate(w),h&&(C.prepend(y.render("option_create",{input:w})),b=e(C[0].childNodes[0])),y.hasOptions=O.items.length>0||h,y.hasOptions?(O.items.length>0?(v=$&&y.getOption($),v&&v.length?m=v:"single"===y.settings.mode&&y.items.length&&(m=y.getOption(y.items[0])),m&&m.length||(m=b&&!y.settings.addPrecedence?y.getAdjacentOption(b,1):C.find("[data-selectable]:first"))):m=b,y.setActiveOption(m),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var n,o,i,r=this;if(e.isArray(t))for(n=0,o=t.length;o>n;n++)r.addOption(t[n]);else(i=r.registerOption(t))&&(r.userOptions[i]=!0,r.lastQuery=null,r.trigger("option_add",i,t))},registerOption:function(e){var t=I(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=I(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,n){var o,i,r,a,s,l,c,d=this;if(t=I(t),r=I(n[d.settings.valueField]),null!==t&&d.options.hasOwnProperty(t)){if("string"!=typeof r)throw new Error("Value must be set in option data");c=d.options[t].$order,r!==t&&(delete d.options[t],a=d.items.indexOf(t),-1!==a&&d.items.splice(a,1,r)),n.$order=n.$order||c,d.options[r]=n,s=d.renderCache.item,l=d.renderCache.option,s&&(delete s[t],delete s[r]),l&&(delete l[t],delete l[r]),-1!==d.items.indexOf(r)&&(o=d.getItem(t),i=e(d.render("item",n)),o.hasClass("active")&&i.addClass("active"),o.replaceWith(i)),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=I(e);var o=n.renderCache.item,i=n.renderCache.option;o&&delete o[e],i&&delete i[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,n){var o=this.$dropdown.find("[data-selectable]"),i=o.index(t)+n;return i>=0&&i<o.length?o.eq(i):e()},getElementWithValue:function(t,n){if(t=I(t),"undefined"!=typeof t&&null!==t)for(var o=0,i=n.length;i>o;o++)if(n[o].getAttribute("data-value")===t)return e(n[o]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,n){for(var o=e.isArray(t)?t:[t],i=0,r=o.length;r>i;i++)this.isPending=r-1>i,this.addItem(o[i],n)},addItem:function(t,n){var o=n?[]:["change"];N(this,o,function(){var o,i,r,a,s,l=this,c=l.settings.mode;return t=I(t),-1!==l.items.indexOf(t)?void("single"===c&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===c&&l.clear(n),"multi"===c&&l.isFull()||(o=e(l.render("item",l.options[t])),s=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(o),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(r=l.$dropdown_content.find("[data-selectable]"),l.isPending||(i=l.getOption(t),a=l.getAdjacentOption(i,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),a&&l.setActiveOption(l.getOption(a))),!r.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,o),l.updateOriginalInput({silent:n})))))})},removeItem:function(e,t){var n,o,i,r=this;n="object"==typeof e?e:r.getItem(e),e=I(n.attr("data-value")),o=r.items.indexOf(e),-1!==o&&(n.remove(),n.hasClass("active")&&(i=r.$activeItems.indexOf(n[0]),r.$activeItems.splice(i,1)),r.items.splice(o,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,t),o<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:t}),r.positionDropdown(),r.trigger("item_remove",e,n))},createItem:function(t,n){var o=this,i=o.caretPos;t=t||e.trim(o.$control_input.val()||"");var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof n&&(n=!0),!o.canCreate(t))return r(),!1;o.lock();var a="function"==typeof o.settings.create?this.settings.create:function(e){var t={};return t[o.settings.labelField]=e,t[o.settings.valueField]=e,t},s=F(function(e){if(o.unlock(),!e||"object"!=typeof e)return r();var t=I(e[o.settings.valueField]);return"string"!=typeof t?r():(o.setTextboxValue(""),o.addOption(e),o.setCaret(i),o.addItem(t),o.refreshOptions(n&&"single"!==o.settings.mode),void r(e))}),l=a.apply(this,[t,s]);return"undefined"!=typeof l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,n=t.isFull(),o=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",o).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!n&&!o)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,o,i,r=this;if(e=e||{},r.tagType===O){for(o=[],t=0,n=r.items.length;n>t;t++)i=r.options[r.items[t]][r.settings.labelField]||"",o.push('<option value="'+S(r.items[t])+'" selected="selected">'+S(i)+"</option>");o.length||this.$input.attr("multiple")||o.push('<option value="" selected="selected"></option>'),r.$input.html(o.join(""))}else r.$input.val(r.getValue()),r.$input.attr("value",r.$input.val());r.isSetup&&(e.silent||r.trigger("change",r.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(t):e(this.$control[0].childNodes[n]).before(t),this.setCaret(n+1)},deleteSelection:function(t){var n,o,i,r,a,s,l,c,d,u=this;if(i=t&&t.keyCode===h?-1:1,r=_(u.$control_input[0]),u.$activeOption&&!u.settings.hideSelected&&(l=u.getAdjacentOption(u.$activeOption,-1).attr("data-value")),a=[],u.$activeItems.length){for(d=u.$control.children(".active:"+(i>0?"last":"first")),s=u.$control.children(":not(input)").index(d),i>0&&s++,n=0,o=u.$activeItems.length;o>n;n++)a.push(e(u.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(u.isFocused||"single"===u.settings.mode)&&u.items.length&&(0>i&&0===r.start&&0===r.length?a.push(u.items[u.caretPos-1]):i>0&&r.start===u.$control_input.val().length&&a.push(u.items[u.caretPos]));if(!a.length||"function"==typeof u.settings.onDelete&&u.settings.onDelete.apply(u,[a])===!1)return!1;for("undefined"!=typeof s&&u.setCaret(s);a.length;)u.removeItem(a.pop());return u.showInput(),u.positionDropdown(),u.refreshOptions(!0),l&&(c=u.getOption(l),c.length&&u.setActiveOption(c)),!0},advanceSelection:function(e,t){var n,o,i,r,a,s,l=this;0!==e&&(l.rtl&&(e*=-1),n=e>0?"last":"first",o=_(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(r=l.$control_input.val().length,a=0>e?0===o.start&&0===o.length:o.start===r,a&&!r&&l.advanceCaret(e,t)):(s=l.$control.children(".active:"+n),s.length&&(i=l.$control.children(":not(input)").index(s),l.setActiveItem(null),l.setCaret(e>0?i+1:i))))},advanceCaret:function(e,t){var n,o,i=this;0!==e&&(n=e>0?"next":"prev",i.isShiftDown?(o=i.$control_input[n](),o.length&&(i.hideInput(),i.setActiveItem(o),t&&t.preventDefault())):i.setCaret(i.caretPos+e))},setCaret:function(t){var n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending){var o,i,r,a;for(r=n.$control.children(":not(input)"),o=0,i=r.length;i>o;o++)a=e(r[o]).detach(),t>o?n.$control_input.before(a):n.$control.append(a)}n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,n=t.eventNS,o=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(o.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:o.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(n),e(document).off(n),e(document.body).off(n),delete t.$input[0].selectize},render:function(e,t){var n,o,i="",r=!1,a=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(n=I(t[a.settings.valueField]),r=!!n),r&&(k(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(n))?a.renderCache[e][n]:(i=a.settings.render[e].apply(this,[t,S]),("option"===e||"option_create"===e)&&(i=i.replace(s,"<$1 data-selectable")),"optgroup"===e&&(o=t[a.settings.optgroupValueField]||"",i=i.replace(s,'<$1 data-group="'+x(S(o))+'"')),("option"===e||"item"===e)&&(i=i.replace(s,'<$1 data-value="'+x(S(n||""))+'"')),r&&(a.renderCache[e][n]=i),i)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return!(!e.length||"function"==typeof n&&!n.apply(t,[e])||"string"==typeof n&&!new RegExp(n).test(e)||n instanceof RegExp&&!n.test(e))}}),L.count=0,L.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var n=e.fn.selectize.defaults,o=e.extend({},n,t),i=o.dataAttr,r=o.labelField,a=o.valueField,s=o.optgroupField,l=o.optgroupLabelField,c=o.optgroupValueField,d=function(t,n){var s,l,c,d,u=t.attr(i);if(u)for(n.options=JSON.parse(u),s=0,l=n.options.length;l>s;s++)n.items.push(n.options[s][a]);else{var p=e.trim(t.val()||"");if(!o.allowEmptyOption&&!p.length)return;for(c=p.split(o.delimiter),s=0,l=c.length;l>s;s++)d={},d[r]=c[s],d[a]=c[s],n.options.push(d);n.items=c}},u=function(t,n){var d,u,p,f,g=n.options,h={},m=function(e){var t=i&&e.attr(i);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,i){t=e(t);var l=I(t.attr("value"));if(l||o.allowEmptyOption)if(h.hasOwnProperty(l)){if(i){var c=h[l][s];c?e.isArray(c)?c.push(i):h[l][s]=[c,i]:h[l][s]=i}}else{var d=m(t)||{};d[r]=d[r]||t.text(),d[a]=d[a]||l,d[s]=d[s]||i,h[l]=d,g.push(d),t.is(":selected")&&n.items.push(l)}},b=function(t){var o,i,r,a,s;for(t=e(t),r=t.attr("label"),r&&(a=m(t)||{},a[l]=r,a[c]=r,n.optgroups.push(a)),s=e("option",t),o=0,i=s.length;i>o;o++)v(s[o],r)};for(n.maxItems=t.attr("multiple")?null:1,f=t.children(),d=0,u=f.length;u>d;d++)p=f[d].tagName.toLowerCase(),"optgroup"===p?b(f[d]):"option"===p&&v(f[d])};return this.each(function(){if(!this.selectize){var i,r=e(this),a=this.tagName.toLowerCase(),s=r.attr("placeholder")||r.attr("data-placeholder");s||o.allowEmptyOption||(s=r.children('option[value=""]').text());var l={placeholder:s,options:[],optgroups:[],items:[]};"select"===a?u(r,l):d(r,l),i=new L(r,e.extend(!0,{},n,l,t))}})},e.fn.selectize.defaults=L.defaults,e.fn.selectize.support={validity:$},L.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var n=t.$control.data("sortable");return n&&n.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var n=t.$control.data("sortable");return n&&n.enable(),e.apply(t,arguments)}}(),t.setup=function(){var n=t.setup;return function(){n.apply(this,arguments);var o=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),o.css({overflow:"visible"})},stop:function(){o.css({overflow:"hidden"});var n=t.$activeItems?t.$activeItems.slice():null,i=[];o.children("[data-value]").each(function(){i.push(e(this).attr("data-value"))}),t.setValue(i),t.setActiveItem(n)}})}}()}}),L.define("dropdown_header",function(t){var n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=function(){var o=n.setup;return function(){o.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)}}()}),L.define("optgroup_columns",function(t){var n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,n){var o=t.closest("[data-group]").find("[data-selectable]"),i=o.index(t)+n;return i>=0&&i<o.length?o.eq(i):e()},this.onKeyDown=function(){var e=n.onKeyDown;return function(t){var o,i,r,a;return!this.isOpen||t.keyCode!==c&&t.keyCode!==p?e.apply(this,arguments):(n.ignoreHover=!0,a=this.$activeOption.closest("[data-group]"),o=a.find("[data-selectable]").index(this.$activeOption),a=t.keyCode===c?a.prev("[data-group]"):a.next("[data-group]"),r=a.find("[data-selectable]"),i=r.eq(Math.min(r.length-1,o)),void(i.length&&this.setActiveOption(i)))}}();var o=function(){var e,t=o.width,n=document;return"undefined"==typeof t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=o.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},i=function(){var i,r,a,s,l,c,d;if(d=e("[data-group]",n.$dropdown_content),r=d.length,r&&n.$dropdown_content.width()){if(t.equalizeHeight){for(a=0,i=0;r>i;i++)a=Math.max(a,d.eq(i).height());d.css({height:a})}t.equalizeWidth&&(c=n.$dropdown_content.innerWidth()-o(),s=Math.round(c/r),d.css({width:s}),r>1&&(l=c-s*(r-1),d.eq(r-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(A.after(this,"positionDropdown",i),A.after(this,"refreshOptions",i))}),L.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this,o='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+S(t.title)+'">'+t.label+"</a>",i=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=function(){var r=n.setup;return function(){if(t.append){var a=n.settings.render.item;n.settings.render.item=function(){return i(a.apply(this,arguments),o)}}r.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!n.isLocked){var o=e(t.currentTarget).parent();n.setActiveItem(o),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),L.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var n=t.onKeyDown;return function(t){var o,i;return t.keyCode===h&&""===this.$control_input.val()&&!this.$activeItems.length&&(o=this.caretPos-1,o>=0&&o<this.items.length)?(i=this.options[this.items[o]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[i])),this.refreshOptions(!0)),void t.preventDefault()):n.apply(this,arguments)}}()}),L});var stat={imagesRemoved:[],imagesAdded:{},imagesAddedKeys:[],imagesModified:[],imagesNotProcessed:[],workingFolder:"",existingImages:{},_options:{},set options(e){for(var t in e)this._options[t]=e[t];this._options!==options&&saveStatus(!0)},get options(){for(var e in this._options);return this._options},_effect:["blur",5],set effect(e){this._effect=e,blur("#effect-preview-image",stat.effect[1]),blur("#effect-fullscreen",stat.effect[1])},get effect(){return this._effect},sliders:{},workingSlider:"s1",_sliderNumber:5,set sliderNumber(e){this._sliderNumber=e,statSaveSlider()},get sliderNumber(){return this._sliderNumber},_sliderInterval:3,set sliderInterval(e){this._sliderInterval=e,statSaveSlider()},get sliderInterval(){return this._sliderInterval},_selectedIds:[],set selectedIds(e){this._selectedIds=e,statSaveSlider()},get selectedIds(){return this._selectedIds},_workingImage:"",set workingImage(e){this._workingImage=e},get workingImage(){return this._workingImage},_workingSize:"",set workingSize(e){this._workingSize=e},get workingSize(){return this._workingSize},_folderImages:[],set folderImages(e){this._folderImages=e,buildFolderTable()},get folderImages(){return this._folderImages},_allImages:{},set allImages(e){this._allImages=e||{},Object.keys(this._allImages).length>0&&getNewImages()},get allImages(){return this._allImages},_newImages:[],set newImages(e){this._newImages=e},get newImages(){return this._newImages},_allFolders:[],set allFolders(e){this._allFolders=e},get allFolders(){return this._allFolders},_newFolders:[],set newFolders(e){if(this._newFolders=e,stat.newFolders.length>0){var t=stat.newFolders[0];stat.workingFolder=t;var n='"'+t+'"';stat.folderImages[t]&&(n=n+" ("+stat.folderImages[t][0]+")"),bootbox.confirm({size:"small",title:"New folder found:",message:n,buttons:{confirm:{label:"Add folder",className:"btn-primary"},cancel:{label:"Do not...",className:"btn-default"}},callback:function(e){return e?(gJ.folders.push(t),setFolderSelect(),$("#upload-folder-select").val(t).prop("selected",!0),void processNewFolder({folder:t,cb:function(){stat.newFolders=arrayWithout(stat.newFolders,stat.workingFolder)}})):(ignoreFolder(t),void(stat.newFolders=arrayWithout(stat.newFolders,t)))}})}},get newFolders(){return this._newFolders},_ignoreFolders:[],set ignoreFolders(e){var t=$("#foldersTable tr[data='"+e+"']");-1===this._ignoreFolders.indexOf(e)?(this._ignoreFolders.push(e),t.removeClass().addClass("warning")):(this._ignoreFolders.splice(this._ignoreFolders.indexOf(e),1),t.removeClass().addClass("default"))},get ignoreFolders(){return this._ignoreFolders},_tagsSelectedIds:[],set tagsSelectedIds(e){var t=this._tagsSelectedIds.indexOf(e);t>-1?this._tagsSelectedIds.splice(t,1):this._tagsSelectedIds.push(e)},get tagsSelectedIds(){return this._tagsSelectedIds},_imageTags:{},set imageTags(e){},get imageTags(){return this._imageTags},_tagsEdited:[],set tagsEdited(e){this._tagsEdited.push(e),this._tagsEdited=this._tagsEdited.unique()},get tagsEdited(){return this._tagsEdited},_allTags:[],set allTags(e){this._allTags=[],this._allTags=e;for(var t=stat.allTags.length,n=0;t>n;n++)prototype({template:"#tag-button-prototype",selectors:["text"],values:[stat.allTags[n]],targets:"#all-tags"})},get allTags(){return this._allTags}};Array.prototype.unique=function(){for(var e=[],t=this.length,n=0;t>n;n++)-1==e.indexOf(this[n])&&e.push(this[n]);return e};var saving=!1;$('.admin-header a[aria-controls="options-panel"]').on("shown.bs.tab",function(e){setOptions(),$("#options-reset").on("click",function(){setOptions(),buildGallery(gJ)}),$("#options-save").on("click",function(e){e.preventDefault(),saveFileAs(JSON.stringify("var options ="+JSON.stringify(stat.options)),"options2.js").done(function(e){}).always(function(e){})})}),$('.admin-header a[aria-controls="raw-panel"]').on("shown.bs.tab",function(e){loader(),$("#gallery-row").find(".gallery-item").off("click").removeClass("selected-image"),$("#json-output").text(JSON.stringify(gJ,null,"	")),getAllBackups().done(function(e){$("#loadBackupSelect").html("").append("<option>---</option>");for(var t=e.length,n=0;t>n;n++){var o=e[n].split(".");$("#loadBackupSelect").append("<option data-url="+e[n]+">"+convertTimestamp(o[1])+"</option>")}$("#loadBackupSelect").on("change",function(){loader();var e=$(this).find("option:selected").attr("data-url"),t="gallery/"+e;return e?void loadBackup(t).done(function(t){$("#json-output").text(JSON.stringify(t,null,"	")),$("#outputFile").text(e),$("#loadBuBtn").on("click",function(){buildGallery(t)}),loader("off")}):($("#json-output").text(JSON.stringify(gJ,null,"	")),$("#outputFile").text("Gallery JSON"),!1)}),loader("off")})});var dis=!0;$("#slider-wrapper").on("click",function(){$(this).addClass("hidden")}),$("#slider-interval-select").on("change",function(){stat.sliderInterval=$(this).val()}),$("#slider-number-select").on("change",function(){stat.sliderNumber=$(this).val()}),$("#slider-clear-btn").on("click",function(){reset()}),$("#slider-fill-btn").on("click",function(){reset();for(var e=0;e<stat.sliderNumber;e++)$("#gallery-row").find("div.gallery-item").eq(e).trigger("click")}),$("#slider-auto-btn").on("click",function(){if(reset(),"true"===$(this).attr("aria-pressed"))return $(this).html('auto <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>'),!0;$(this).html('auto <span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>');for(var e=$("#slider-number-select").val(),t=0;e>t;t++)$("#gallery-section").find("div.gallery-item").eq(t).trigger("click");stat.selectedIds="auto",buttonDisable(!1)}),$("#slider-save-btn").on("click",function(){gJ.sliders=stat.sliders,saveStatus(!0)}),$('.admin-header a[aria-controls="slider-panel"]').on("shown.bs.tab",function(e){$("#slider-interval-select").val(stat.sliderInterval).prop("selected",!0),$("#slider-number-select").val(stat.sliderNumber).prop("selected",!0),$("#blur-slider").val(stat.effect[1]),$("#blur-input").val(stat.effect[1]),$("#gallery-row").find("div.selected-image").removeClass("selected-image"),$("#slider-sortable").html(""),buttonDisable(dis),autoIds(),stat.sliders[stat.workingSlider]&&"auto"===stat.sliders[stat.workingSlider][0]?$("#slider-auto-btn").addClass("active").attr("aria-pressed",!0):$("#slider-auto-btn").removeClass("active").attr("aria-pressed",!1),$("#slider-sortable").is(":empty")&&(prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),proportion({selector:"div#slider-sortable div.placeholder-item",proportion:[1,1],className:"ssp",styleId:"slider-sortable-prop"})),$("#slider-preview-btn").on("click",function(){$("#slider-1").attr("id",stat.workingSlider),buildSliders(pickFromObject(stat.sliders,[stat.workingSlider])),$("#slider-wrapper").removeClass("hidden"),$("#"+stat.workingSlider).find(".item").respi(),setTimeout(function(){},stat.sliders[stat.workingSlider][1])}),sortable(".sortable",{placeholderClass:"col-xs-2 gallery-item sort-placeholder",forcePlaceholderSize:!0,hoverClass:"is-hovered"}),sortable(".sortable")[0].addEventListener("sortupdate",function(e){$('#slider-auto-btn[aria-pressed="true"]').removeClass("active").attr("aria-pressed","false").html('auto <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>'),selectedIds()}),$("#gallery-row").find("div.gallery-item").off("click").on("click",function(e){if(e.preventDefault(),e.stopPropagation(),$('#slider-auto-btn[aria-pressed="true"]').removeClass("active").attr("aria-pressed","false").html('auto <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>'),$(this).toggleClass("selected-image"),$(this).hasClass("selected-image")){prototype({template:"#sortable-item-prototype",selectors:["data-id","bg-image"],values:[$(this).attr("data-id"),$(this).find("div.thumb-div").attr("data-src")],targets:"#slider-sortable"});var t=document.getElementById("slider-sortable").querySelectorAll("div.gallery-item");$(t).removeClass("selected-image"),$(t).off().on("click",function(){$(t).removeClass("selected-image"),$(this).addClass("selected-image"),loadBlur($(this).attr("data-id"))}),t.length>0&&(proportion({selector:"div#slider-sortable div.gallery-item",proportion:[1,1],className:"ssp",styleId:"slider-sortable-prop"}),$(t).css("height",Math.round(t[0].offsetHeight)))}else $("#slider-sortable").find('div.gallery-item[data-id="'+$(this).attr("data-id")+'"]').remove();sortable(".sortable"),$("#slider-sortable").find("div.placeholder-item").remove(),selectedIds();var n=stat.selectedIds.length;return 0===n&&(dis=!0,prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),proportion({selector:"div#slider-sortable div.placeholder-item",proportion:[1,1],className:"ssp",styleId:"slider-sortable-prop"}),document.getElementById("effect-preview-image").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),n>0&&loadBlur(),1===n&&(dis=!0,prototype({template:"#placeholder-item-prototype",targets:"#slider-sortable"}),proportion({selector:"div#slider-sortable div.placeholder-item",proportion:[1,1],
className:"ssp",styleId:"slider-sortable-prop"})),n>=2&&(dis=!1),buttonDisable(dis),dis||gJ.sliders[stat.workingSlider]===stat.sliders[stat.workingSlider]?void(document.getElementById("slider-save-btn").disabled=!0):(document.getElementById("slider-save-btn").disabled=!1,saveStatus(!0),!1)}),$("#blur-slider").rangeslider({polyfill:!1,onInit:function(e,t){},onSlide:function(e,t){document.getElementById("blur-input").value=t},onSlideEnd:function(e,t){document.getElementById("blur-input").value=t,$("#blur-input").trigger("change")}}),$("#blur-input").on("change",function(){var e=$("#blur-slider");e.val()!=this.value&&e.val(this.value).change(),stat.effect=["blur",this.value]}),$("#blur-save-button").click(function(e){gJ.effect=stat.effect})}),$('.admin-header a[aria-controls="start-panel"]').on("shown.bs.tab",function(e){$("#gallery-row").find(".gallery-item").removeClass("selected-image").off("click").on("click",function(e){$("#gallery-lightbox").modal("show")}),$("#admin-panel").find(".scan-button").on("click",function(){loader(),getAllImages(),loader("off")})});var selectedImages_tags,selectizeInput=$("#input-tags").selectize({plugins:["remove_button"],delimiter:",",persist:!1,createFilter:"^[a-zA-Z0-9_äüö -]+$",create:function(e){for(var t=0,n=stat.tagsSelectedIds.length;n>t;t++){var o=stat.tagsSelectedIds[t],i=stat.imageTags[o],r=i.concat(e.split(",")).unique();r!=i&&(stat.imageTags[o]=r,stat.tagsEdited=o)}return{text:e,value:e}}}),selectizeTags=selectizeInput[0].selectize;selectizeTags.clear(),$('.admin-header a[aria-controls="tags-panel"]').on("shown.bs.tab",function(e){for(var t in gJ.images)stat.imageTags[t]=stat.imageTags[t]||gJ.images[t].tags;document.getElementById("all-tags").innerHTML="",stat.allTags=stat.allTags.length?stat.allTags:gJ.tags,$("#all-tags").find("button").on("click",function(){var e=$(this).text();for(var t in stat.imageTags)(stat.imageTags[t]===e||stat.imageTags[t].indexOf(e)>-1)&&$("#gallery-row").find('div.gallery-item[data-id="'+t+'"]').trigger("click")}),$("#gallery-row").find("div.gallery-item").removeClass("selected-image").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).toggleClass("selected-image"),stat.tagsSelectedIds=$(this).attr("data-id"),selectTags()}),$("#tags-submit-button").on("click",function(e){e.preventDefault();for(var t=[],n=stat.tagsEdited.length,o=0;n>o;o++)gJ.images[stat.tagsEdited[o]].tags=stat.imageTags[stat.tagsEdited[o]];for(var i in gJ.images)t.push(gJ.images[i].tags);return gJ.tags=t.unique(),buildGalleryNavigation(),saveStatus(!0),!1}),$("#deleteImagesButton").on("click",function(){deleteSelectedImages()})}),$('.admin-header a[aria-controls="upload-panel"]').on("shown.bs.tab",function(e){var t={};$("#new-folder-name").val(""),$("#new-folder-btn").prop("disabled",!0),setFolderSelect(),$("#new-folder-name").on("keyup",function(e){var t=$(this).val().trim().length;if(0===t)return $("#new-folder-btn").prop("disabled",!0),!1;if(t>1&&8!=e.keyCode){var n=new RegExp("^[a-zA-Z0-9_äüö -]+$"),o=String.fromCharCode(e.charCode?e.charCode:e.which);n.test(o)||(e.preventDefault(),console.log("test"))}1>t?$("#new-folder-btn").prop("disabled",!0):$("#new-folder-btn").prop("disabled",!1)}),$("#new-folder-btn").on("click",function(){var e=$("#new-folder-name").val();if(e){if(e=e.trim(),-1!==stat.allFolders.indexOf(e)||-1!==gJ.folders.indexOf(e)||-1!==gJ.ignore.indexOf(e))return bootbox.alert({size:"small",message:'A folder "'+e+'" already exists.',callback:function(e){}}),!1;var t=checkIrregularFilename(e);if(t.error)return bootbox.alert({size:"small",message:'Please choose another name.<br> The phrase "'+t.expression+'" is prohibited.',callback:function(e){}}),!1;createFolder(e).done(function(e){stat.newFolders=[withoutGalleryBase(e.dir)],$("#new-folder-name").val("")})}}),$("#upload-tags").on("change",function(){var e=$(this).val();if(e&&" "!=e){e=e.trim(),e=e.split(",");for(var n=0;e.length>n;n++)e[n]=e[n].trim();e=arrayWithout(e,[""," "]),e=unique(e),t.tags=e.toString(),upldr.options.data=JSON.stringify(t)}}),$("#upload-folder-select").on("change",function(){t.path=options.galleryPath+$(this).val(),upldr.options.data=JSON.stringify(t)}),t.path=$("#upload-folder-select").val(),upldr.options.data=JSON.stringify(t),upldr.set({target:"upldr.php",cbReaderOnload:function(e,t,n,o,i){prototype({template:".file-row-prototype",selectors:["src","name","type","size","lastMod"],values:[e,t,n,o,i],targets:"#file-table-body"})},cbOnloadend:function(e){console.log(e.target.response),processResponse(e.target.response),setTimeout(function(){upldr.reset()},3e3)}})}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,n){"use strict";function o(e){var t=m[g.locale];return t?t[e]:m.en[e]}function i(e,n,o){e.stopPropagation(),e.preventDefault();var i=t.isFunction(o)&&o.call(n,e)===!1;i||n.modal("hide")}function r(e){var t,n=0;for(t in e)n++;return n}function a(e,n){var o=0;t.each(e,function(e,t){n(e,t,o++)})}function s(e){var n,o;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},g,e),e.buttons||(e.buttons={}),n=e.buttons,o=r(n),a(n,function(e,i,r){if(t.isFunction(i)&&(i=n[e]={callback:i}),"object"!==t.type(i))throw new Error("button with key "+e+" must be an object");i.label||(i.label=e),i.className||(i.className=2>=o&&r===o-1?"btn-primary":"btn-default")}),e}function l(e,t){var n=e.length,o={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(o[t[0]]=e[0],o[t[1]]=e[1]):o=e[0],o}function c(e,n,o){return t.extend(!0,{},e,l(n,o))}function d(e,t,n,o){var i={className:"bootbox-"+e,buttons:u.apply(null,t)};return p(c(i,o,n),t)}function u(){for(var e={},t=0,n=arguments.length;n>t;t++){var i=arguments[t],r=i.toLowerCase(),a=i.toUpperCase();e[r]={label:o(a)}}return e}function p(e,t){var o={};return a(t,function(e,t){o[t]=!0}),a(e.buttons,function(e){if(o[e]===n)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var f={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},g={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},h={};h.alert=function(){var e;if(e=d("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback.call(this):!0},h.dialog(e)},h.confirm=function(){var e;if(e=d("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return h.dialog(e)},h.prompt=function(){var e,o,i,r,s,l,d;if(r=t(f.form),o={className:"bootbox-prompt",buttons:u("cancel","confirm"),value:"",inputType:"text"},e=p(c(o,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n?!0:e.show,e.message=r,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=s.val();break;case"checkbox":var o=s.find("input:checked");n=[],a(o,function(e,o){n.push(t(o).val())})}return e.callback.call(this,n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!f.inputs[e.inputType])throw new Error("invalid prompt type");switch(s=t(f.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":s.val(e.value);break;case"select":var g={};if(d=e.inputOptions||[],!t.isArray(d))throw new Error("Please pass an array of input options");if(!d.length)throw new Error("prompt with select requires options");a(d,function(e,o){var i=s;if(o.value===n||o.text===n)throw new Error("given options in wrong format");o.group&&(g[o.group]||(g[o.group]=t("<optgroup/>").attr("label",o.group)),i=g[o.group]),i.append("<option value='"+o.value+"'>"+o.text+"</option>")}),a(g,function(e,t){s.append(t)}),s.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(d=e.inputOptions||[],!d.length)throw new Error("prompt with checkbox requires options");if(!d[0].value||!d[0].text)throw new Error("given options in wrong format");s=t("<div/>"),a(d,function(n,o){var i=t(f.inputs[e.inputType]);i.find("input").attr("value",o.value),i.find("label").append(o.text),a(m,function(e,t){t===o.value&&i.find("input").prop("checked",!0)}),s.append(i)})}return e.placeholder&&s.attr("placeholder",e.placeholder),e.pattern&&s.attr("pattern",e.pattern),e.maxlength&&s.attr("maxlength",e.maxlength),r.append(s),r.on("submit",function(e){e.preventDefault(),e.stopPropagation(),i.find(".btn-primary").click()}),i=h.dialog(e),i.off("shown.bs.modal"),i.on("shown.bs.modal",function(){s.focus()}),l===!0&&i.modal("show"),i},h.dialog=function(e){e=s(e);var o=t(f.dialog),r=o.find(".modal-dialog"),l=o.find(".modal-body"),c=e.buttons,d="",u={onEscape:e.onEscape};if(t.fn.modal===n)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(a(c,function(e,t){d+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",u[e]=t.callback}),l.find(".bootbox-body").html(e.message),e.animate===!0&&o.addClass("fade"),e.className&&o.addClass(e.className),"large"===e.size?r.addClass("modal-lg"):"small"===e.size&&r.addClass("modal-sm"),e.title&&l.before(f.header),e.closeButton){var p=t(f.closeButton);e.title?o.find(".modal-header").prepend(p):p.css("margin-top","-10px").prependTo(l)}return e.title&&o.find(".modal-title").html(e.title),d.length&&(l.after(f.footer),o.find(".modal-footer").html(d)),o.on("hidden.bs.modal",function(e){e.target===this&&o.remove()}),o.on("shown.bs.modal",function(){o.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&o.on("click.dismiss.bs.modal",function(e){o.children(".modal-backdrop").length&&(e.currentTarget=o.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&o.trigger("escape.close.bb")}),o.on("escape.close.bb",function(e){u.onEscape&&i(e,o,u.onEscape)}),o.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");i(e,o,u[n])}),o.on("click",".bootbox-close-button",function(e){i(e,o,u.onEscape)}),o.on("keyup",function(e){27===e.which&&o.trigger("escape.close.bb")}),t(e.container).append(o),o.modal({backdrop:e.backdrop?"static":!1,keyboard:!1,show:!1}),e.show&&o.modal("show"),o},h.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(g,e)},h.hideAll=function(){return t(".bootbox").modal("hide"),h};var m={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return h.addLocale=function(e,n){return t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!n[t])throw new Error("Please supply a translation for '"+t+"'")}),m[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},h},h.removeLocale=function(e){return delete m[e],h},h.setLocale=function(e){return h.setDefaults("locale",e)},h.init=function(n){return e(n||t)},h}),!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n,o=[],i=[],r=function(e,t,n){return void 0===n?e&&e.h5s&&e.h5s.data&&e.h5s.data[t]:(e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},void(e.h5s.data[t]=n))},a=function(e){e.h5s&&delete e.h5s.data};switch(!0){case"matches"in window.Element.prototype:n="matches";break;case"mozMatchesSelector"in window.Element.prototype:n="mozMatchesSelector";break;case"msMatchesSelector"in window.Element.prototype:n="msMatchesSelector";break;case"webkitMatchesSelector"in window.Element.prototype:n="webkitMatchesSelector"}var s=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var o=[],i=0;i<e.length;++i)"string"==typeof t&&e[i][n](t)&&o.push(e[i]),-1!==t.indexOf(e[i])&&o.push(e[i]);return o},l=function(e,t,n){if(e instanceof Array)for(var o=0;o<e.length;++o)l(e[o],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},c=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},d=function(e,t,n){if(e instanceof Array)for(var o=0;o<e.length;++o)d(e[o],t,n);else e.setAttribute(t,n)},u=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)u(e[n],t);else e.removeAttribute(t)},p=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},f=function(e){c(e,"dragstart"),c(e,"dragend"),c(e,"selectstart"),c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},g=function(e){c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},h=function(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)},m=function(e,t){return t.x||(t.x=parseInt(e.pageX-p(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-p(t.draggedItem).top)),t},v=function(e){return{draggedItem:e}},b=function(e,t){var n=v(t);n=m(e,n),h(e,n)},y=function(e){a(e),u(e,"aria-dropeffect")},w=function(e){u(e,"aria-grabbed"),u(e,"draggable"),u(e,"role")},O=function(e,t){return e===t||void 0!==r(e,"connectWith")&&r(e,"connectWith")===r(t,"connectWith")},C=function(e,t){var n,o=[];if(!t)return e;for(var i=0;i<e.length;++i)n=e[i].querySelectorAll(t),o=o.concat(Array.prototype.slice.call(n));return o},$=function(e){var t=r(e,"opts")||{},n=s(e.children,t.items),o=C(n,t.handle);g(e),y(e),c(o,"mousedown"),f(n),w(n)},k=function(e){var t=r(e,"opts"),n=s(e.children,t.items),o=C(n,t.handle);d(e,"aria-dropeffect","move"),d(o,"draggable","true");var i=(document||window.document).createElement("span");"function"!=typeof i.dragDrop||t.disableIEFix||l(o,"mousedown",function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})},I=function(e){var t=r(e,"opts"),n=s(e.children,t.items),o=C(n,t.handle);d(e,"aria-dropeffect","none"),d(o,"draggable","false"),c(o,"mousedown")},S=function(e){var t=r(e,"opts"),n=s(e.children,t.items),o=C(n,t.handle);f(n),c(o,"mousedown"),g(e)},x=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},A=function(e){return!!e.parentNode},F=function(e){if("string"!=typeof e)return e;var t=document.createElement("div");return t.innerHTML=e,t.firstChild},E=function(e,t){e.parentElement.insertBefore(t,e)},N=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},j=function(e){e.parentNode&&e.parentNode.removeChild(e)},_=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},z=function(e,t){i.forEach(function(n){O(e,n)&&n.dispatchEvent(t)})},T=function(n,a){var c=String(a);return a=function(e){var t={connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1};for(var n in e)t[n]=e[n];return t}(a),"string"==typeof n&&(n=document.querySelectorAll(n)),n instanceof window.Element&&(n=[n]),n=Array.prototype.slice.call(n),n.forEach(function(n){if(/enable|disable|destroy/.test(c))return void T[c](n);a=r(n,"opts")||a,r(n,"opts",a),S(n);var u,f,g=s(n.children,a.items),m=a.placeholder;if(m||(m=document.createElement(/^ul|ol$/i.test(n.tagName)?"li":"div")),m=F(m),m.classList.add.apply(m.classList,a.placeholderClass.split(" ")),!n.getAttribute("data-sortable-id")){var v=i.length;i[v]=n,d(n,"data-sortable-id",v),d(g,"data-item-sortable-id",v)}if(r(n,"items",a.items),o.push(m),a.connectWith&&r(n,"connectWith",a.connectWith),k(n),d(g,"role","option"),d(g,"aria-grabbed","false"),a.hoverClass){var y="sortable-over";"string"==typeof a.hoverClass&&(y=a.hoverClass),l(g,"mouseenter",function(){this.classList.add(y)}),l(g,"mouseleave",function(){this.classList.remove(y)})}l(g,"dragstart",function(o){o.stopImmediatePropagation(),a.dragImage?(h(o,{draggedItem:a.dragImage,x:0,y:0}),console.log("WARNING: dragImage option is deprecated and will be removed in the future!")):b(o,this),this.classList.add(a.draggingClass),e=this,d(e,"aria-grabbed","true"),u=x(e),t=parseInt(window.getComputedStyle(e).height),f=this.parentElement,z(n,_("sortstart",{item:e,placeholder:m,startparent:f}))}),l(g,"dragend",function(){var i;e&&(e.classList.remove(a.draggingClass),d(e,"aria-grabbed","false"),e.style.display=e.oldDisplay,delete e.oldDisplay,o.forEach(j),i=this.parentElement,z(n,_("sortstop",{item:e,startparent:f})),u===x(e)&&f===i||z(n,_("sortupdate",{item:e,index:s(i.children,r(i,"items")).indexOf(e),oldindex:g.indexOf(e),elementIndex:x(e),oldElementIndex:u,startparent:f,endparent:i})),e=null,t=null)}),l([n,m],"drop",function(t){var i;O(n,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),i=o.filter(A)[0],N(i,e),e.dispatchEvent(_("dragend")))});var w=function(i){if(O(n,e.parentElement))if(i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="move",-1!==g.indexOf(this)){var r=parseInt(window.getComputedStyle(this).height),l=x(m),c=x(this);if(a.forcePlaceholderSize&&(m.style.height=t+"px"),r>t){var d=r-t,u=p(this).top;if(c>l&&i.pageY<u+d)return;if(l>c&&i.pageY>u+r-d)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),e.style.display="none",c>l?N(this,m):E(this,m),o.filter(function(e){return e!==m}).forEach(j)}else-1!==o.indexOf(this)||s(this.children,a.items).length||(o.forEach(j),this.appendChild(m))};l(g.concat(n),"dragover",w),l(g.concat(n),"dragenter",w)}),n};return T.destroy=function(e){$(e)},T.enable=function(e){k(e)},T.disable=function(e){I(e)},T});var loggedin=function(){var e=document.cookie.split("=")[1];return!!e},request=!0,allFolders=function(){return $.post("./requests/allFolders.php","allFolders",null,"json")},createFolder=function(e){return $.post("./requests/createFolder.php","folder=gallery/"+e,null,"json")},removeFolder=function(e){return $.post("./requests/removeFolder.php","folder=gallery/"+e,null)},imagesFromFolder=function(e){var t="folder=../gallery/"+e+"&ts="+Date.now();return $.post("./requests/imagesFromFolder.php",t,null,"json").done(function(e){stat.allImages=e})},resizeStore=function(e,t,n,o){var i="folder=gallery/"+e+"&file="+t+"&sizes="+n+"&force="+o;return $.post("./requests/resizeStore.php",i,"json")},removeImage=function(e){return $.post("./requests/removeImage.php","path=gallery/"+e,null,"json")},getAllBackups=function(){return $.post("./requests/allBackups.php","allBackups=true&t="+Date.now(),null,"json")},backup=function(){return $.post(options.scriptBase+"backup.php","backup=true",null,"json")},loadBackup=function(e){return $.getJSON(e)},fileExists=function(e){return $.ajax({url:e,type:"HEAD",async:!0})},saveFileAs=function(e,t){return $.post(options.scriptBase+"saveFileAs.php","content="+e+"&target="+t)},_resizeStoreSizes=function(e,t,n,o){function i(){a<n.length?(stat.workingSize=n[a],resizeStore(e,t,n[a],!1).done(function(){a++,i()}).fail(function(){})):r()}if(!e||!t)return!1;var r,n=n||options.sizes;this.done=function(e){r=e};var a=0;i()};!function(e,t){"use strict";var n=function(e,t){var n,o,a,s,l,c,d,u,p,f,g,h,m,v,b,y="-",w=[";","?",":","@","&","=","+","$",",","/"],O=[";","?",":","@","&","=","+","$",","],C=[".","!","~","*","'","(",")"],$="",k="",I=!0,S={},x={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","က":"k","ခ":"kh","ဂ":"g","ဃ":"ga","င":"ng","စ":"s","ဆ":"sa","ဇ":"z","စျ":"za","ည":"ny","ဋ":"t","ဌ":"ta","ဍ":"d","ဎ":"da","ဏ":"na","တ":"t","ထ":"ta","ဒ":"d","ဓ":"da","န":"n","ပ":"p","ဖ":"pa","ဗ":"b","ဘ":"ba","မ":"m","ယ":"y","ရ":"ya","လ":"l","ဝ":"w","သ":"th","ဟ":"h","ဠ":"la","အ":"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h","ဧ":"e","၏":"-e","ဣ":"i","ဤ":"-i","ဉ":"u","ဦ":"-u","ဩ":"aw","သြော":"aw","ဪ":"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ހ":"h","ށ":"sh","ނ":"n","ރ":"r","ބ":"b","ޅ":"lh","ކ":"k","އ":"a","ވ":"v","މ":"m","ފ":"f","ދ":"dh","ތ":"th","ލ":"l","ގ":"g","ޏ":"gn","ސ":"s","ޑ":"d","ޒ":"z","ޓ":"t","ޔ":"y","ޕ":"p","ޖ":"j","ޗ":"ch","ޘ":"tt","ޙ":"hh","ޚ":"kh","ޛ":"th","ޜ":"z","ޝ":"sh","ޞ":"s","ޟ":"d","ޠ":"t","ޡ":"z","ޢ":"a","ޣ":"gh","ޤ":"q","ޥ":"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","ă":"a","Ă":"A","ș":"s","Ș":"S","ț":"t","Ț":"T","ţ":"t","Ţ":"T","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"I","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"Kh","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","ђ":"dj","ј":"j","ћ":"c","џ":"dz","Ђ":"Dj","Ј":"j","Ћ":"C","Џ":"Dz","ľ":"l","ĺ":"l","ŕ":"r","Ľ":"L","Ĺ":"L","Ŕ":"R","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","ả":"a","Ả":"A","ẳ":"a","Ẳ":"A","ẩ":"a","Ẩ":"A","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E","ẽ":"e","Ẽ":"E","ẻ":"e","Ẻ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ể":"e","Ể":"E","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ổ":"o","Ổ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","Ở":"o","ở":"o","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ỉ":"i","Ỉ":"i","ủ":"u","Ủ":"U","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ử":"u","Ử":"ư","ỷ":"y","Ỷ":"y","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF"},A=["်","ް"],F={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},E={en:{},az:{"ç":"c","ə":"e","ğ":"g","ı":"i","ö":"o","ş":"s","ü":"u","Ç":"C","Ə":"E","Ğ":"G","İ":"I","Ö":"O","Ş":"S","Ü":"U"},cs:{"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"},fi:{"ä":"a","Ä":"A","ö":"o","Ö":"O"},hu:{"ä":"a","Ä":"A","ö":"o","Ö":"O","ü":"u","Ü":"U","ű":"u","Ű":"U"},lt:{"ą":"a","č":"c","ę":"e","ė":"e","į":"i","š":"s","ų":"u","ū":"u","ž":"z","Ą":"A","Č":"C","Ę":"E","Ė":"E","Į":"I","Š":"S","Ų":"U","Ū":"U"},lv:{"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z"},pl:{"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"O","Ś":"S","Ź":"Z","Ż":"Z"},sk:{"ä":"a","Ä":"A"},sr:{"љ":"lj","њ":"nj","Љ":"Lj","Њ":"Nj","đ":"dj","Đ":"Dj"},tr:{"Ü":"U","Ö":"O","ü":"u","ö":"o"}},N={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cz:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mene jako",">":"vice jako","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}};if("string"!=typeof e)return"";if("string"==typeof t&&(y=t),d=N.en,u=E.en,"object"==typeof t){n=t.maintainCase||!1,S=t.custom&&"object"==typeof t.custom?t.custom:S,
a=+t.truncate>1&&t.truncate||!1,s=t.uric||!1,l=t.uricNoSlash||!1,c=t.mark||!1,I=t.symbols!==!1&&t.lang!==!1,y=t.separator||y,s&&(b+=w.join("")),l&&(b+=O.join("")),c&&(b+=C.join("")),d=t.lang&&N[t.lang]&&I?N[t.lang]:I?N.en:{},u=t.lang&&E[t.lang]?E[t.lang]:t.lang===!1||t.lang===!0?{}:E.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach(function(e){S[e+""]=e+""}),o=!0):o=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach(function(e){S[e+""]=e+""}),Object.keys(S).forEach(function(t){var n;n=t.length>1?new RegExp("\\b"+i(t)+"\\b","gi"):new RegExp(i(t),"gi"),e=e.replace(n,S[t])});for(g in S)b+=g}for(b+=y,b=i(b),e=e.replace(/(^\s+|\s+$)/g,""),m=!1,v=!1,f=0,h=e.length;h>f;f++)g=e[f],r(g,S)?m=!1:u[g]?(g=m&&u[g].match(/[A-Za-z0-9]/)?" "+u[g]:u[g],m=!1):g in x?(h>f+1&&A.indexOf(e[f+1])>=0?(k+=g,g=""):v===!0?(g=F[k]+x[g],k=""):g=m&&x[g].match(/[A-Za-z0-9]/)?" "+x[g]:x[g],m=!1,v=!1):g in F?(k+=g,g="",f===h-1&&(g=F[k]),v=!0):!d[g]||s&&-1!==w.join("").indexOf(g)||l&&-1!==O.join("").indexOf(g)?(v===!0?(g=F[k]+g,k="",v=!1):m&&(/[A-Za-z0-9]/.test(g)||$.substr(-1).match(/A-Za-z0-9]/))&&(g=" "+g),m=!1):(g=m||$.substr(-1).match(/[A-Za-z0-9]/)?y+d[g]:d[g],g+=void 0!==e[f+1]&&e[f+1].match(/[A-Za-z0-9]/)?y:"",m=!0),$+=g.replace(new RegExp("[^\\w\\s"+b+"_-]","g"),y);return o&&($=$.replace(/(\w)(\S*)/g,function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(S).indexOf(o.toLowerCase())<0?o:o.toLowerCase()})),$=$.replace(/\s+/g,y).replace(new RegExp("\\"+y+"+","g"),y).replace(new RegExp("(^\\"+y+"+|\\"+y+"+$)","g"),""),a&&$.length>a&&(p=$.charAt(a)===y,$=$.slice(0,a),p||($=$.slice(0,$.lastIndexOf(y)))),n||o||($=$.toLowerCase()),$},o=function(e){return function(t){return n(t,e)}},i=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},r=function(e,t){for(var n in t)if(t[n]===e)return!0};if("undefined"!=typeof module&&module.exports)module.exports=n,module.exports.createSlug=o;else if("undefined"!=typeof define&&define.amd)define([],function(){return n});else try{if(e.getSlug||e.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";e.getSlug=n,e.createSlug=o}catch(e){}}(this);var _upldr=function(){function e(e){e.stopPropagation(),e.preventDefault();var t;if(e.target.files)t=e.target.files;else{if(!e.dataTransfer.files)return!1;t=e.dataTransfer.files}for(var n=0;n<t.length;n++)t[n].type.match(r.typeMatch)&&s.push(t[n]);if(s.length<1)return!1;u.disabled=!1,p.disabled=!1;var o=document.getElementById("file-table-body");o.innerHTML="";for(var n=0;n<s.length;n++){var i=new FileReader,a=s[n];if(i.name=a.name,r.slug&&getSlug){var l=a.name.split(".");l[0]=getSlug(l[0]),i.name=l.join(".")}i.type=a.type,i.size=(a.size/1e3).toFixed(2),i.lastMod=a.lastModifiedDate.toLocaleDateString(),i.onload=function(e){var t=e.target.result;r.cbReaderOnload(t,this.name,this.type,this.size,this.lastMod)},i.readAsDataURL(a)}}function t(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function n(){a&&a.abort()}function o(e){e.lengthComputable&&(percLoaded=Math.round(e.loaded/e.total*100)+"%",d.style.width=percLoaded,d.innerHTML=percLoaded,u.textContent=percLoaded)}function i(e){if(e.preventDefault(),u.disabled=!0,p.disabled=!0,!s||0===s.length)return!1;for(var t=new FormData,n=0;n<s.length;n++){var i=s[n];i.type.match(r.typeMatch)&&t.append("files[]",i)}r.data&&t.append("data",r.data),a=new XMLHttpRequest,a.onreadystatechange=function(){try{JSON.parse(a.response)}catch(e){}},a.onloadend=function(e){r.cbOnloadend&&r.cbOnloadend(e)},a.upload.addEventListener("progress",o,!1),a.open("POST",r.target,!0),a.send(t)}this.options={target:"upldr.php",typeMatch:"image.*",slug:!0,cbReaderOnload:function(){},cbReset:function(){document.getElementById("file-table-body").innerHTML=""}};var r=this.options;this.set=function(e){if(e)for(var t in e)r[t]=e[t]};var a,s=[],l=document.getElementById("upldr-form"),c=document.getElementById("upldr-input-file"),d=document.getElementById("upldr-progress-bar"),u=document.getElementById("upldr-submit-btn"),p=document.getElementById("upldr-reset-btn"),f=document.getElementById("upldr-abort-btn");u.disabled=!0,p.disabled=!0,f.disabled=!0;var g=u.innerHTML,h=document.querySelectorAll(".upldr-dropzone");h.length<1&&(h=document.body),this.reset=function(){s=[],l.reset(),d.style.width=0,d.innerHTML="",u.innerHTML=g,u.disabled=!0,p.disabled=!0,r.cbReset&&r.cbReset()},l.onsubmit=i,f.onclick=n,p.onclick=this.reset,c.onchange=e,h.addEventListener("dragover",t,!1),h.addEventListener("drop",e,!1)},upldr=new _upldr;